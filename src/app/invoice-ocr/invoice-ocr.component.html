<div class="container mt-4">
  <h2>Upload Invoice Image</h2>

  <input type="file" accept="image/*" (change)="onFileSelected($event)" class="form-control mb-3" />

  <div *ngIf="imagePreview" class="mb-3">
    <img [src]="imagePreview" alt="Preview" style="max-width: 50%; height: auto; border: 1px solid #ddd; border-radius: 6px;" />
  </div>

  <div *ngIf="loading" class="alert alert-info">Processing imageâ€¦</div>
  <div *ngIf="errorMsg && !loading" class="alert alert-danger">{{ errorMsg }}</div>

  <!-- <div *ngIf="parsedJson && !loading">
    <h3>Parsed Invoice JSON (from API)</h3>
    <pre>{{ parsedJson | json}}</pre>
  </div> -->

  <div *ngIf="parsedJson && !loading">
    <h3>Invoice Details</h3>
    <table class="table table-bordered table-striped">
      <tbody>
        <tr>
          <th>Vendor</th>
          <td>{{parsedJson.vendorName}}</td>
        </tr>
        <tr>
          <th>Invoice No</th>
          <td>{{parsedJson.invoiceNumber}}</td>
        </tr>
        <tr>
          <th>Invoice Date</th>
          <td>{{parsedJson.invoiceDate || '-'}}</td>
        </tr>
        <tr>
          <th>Buyer</th>
          <td>{{parsedJson.buyerName}}</td>
        </tr>
        <tr>
          <th>Total Amount</th>
          <td>{{parsedJson.totalAmount || '-'}}</td>
        </tr>
        <tr>
          <th>Tax Amount</th>
          <td>{{parsedJson.taxAmount || '-'}}</td>
        </tr>
      </tbody>
    </table>
    <h3>Line Items</h3>
    <table class="table table-bordered table-hover table-sm">
      <thead class="table-dark">
        <tr>
          <th>Sr.No</th>
          <th>Particulars</th>
          <th>Colour</th>
          <th>Size</th>
          <th>Quantity</th>
          <th>Unit Price</th>
          <th>Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of parsedJson.lineItems">
          <td>{{item.serialNumber}}</td>
          <td>{{item.particulars}}</td>
          <td>{{item.colour}}</td>
          <td>{{item.size}}</td>
          <td>{{item.quantity || '-'}}</td>
          <td>{{item.unitPrice || '-'}}</td>
          <td>{{item.amount || '-'}}</td>
        </tr>
      </tbody>
    </table>

    <h3>Terms and Conditions</h3>
    <pre>{{parsedJson.terms}}</pre>
  </div>
</div>
